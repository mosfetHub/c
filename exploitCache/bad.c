#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct Node {
        struct Node *node;
        int key;
        char name[256];
        char school[256];
} Node;

void makeLinkedList(Node *head, int length) {
        Node **cursor = &head;
        int i;
        for (i = 0; i < length; i++) {
                //printf("Adding Node\n");
                Node *add_node = (Node*) malloc(sizeof(Node));
                add_node->key = i+1;
                (*cursor)->node = add_node;
                cursor = &(*cursor)->node;
        }
}

void freeLinkedList(Node *head) {
        if (!head->node) {
                free(head);
                return;
        }
        freeLinkedList(head->node);
        free(head);
}

int main (int argc, char* argv[]) {
        if (argc != 2) {
                printf("usage: <program> <list length>\n");
                exit(1);
        }

        int length = atoi(argv[1]);
        Node *head = (Node*) malloc(sizeof(Node));
        makeLinkedList(head, length);
        Node **cursor = &head;

        while (*cursor) {
                if ((*cursor)->key == length) {
                        printf("Key was found!!\n");
                        break;
                }
                //printf("Key wasn't found. This node has a key: %d\n", (*cursor)->key);
                cursor = &(*cursor)->node;
        }

        freeLinkedList(head);

        return 0;
}
